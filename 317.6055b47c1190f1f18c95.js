(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[317],{4317:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BannerModule:()=>y});var i=n(8583),r=n(3679),a=n(7716),o=n(8319),s=n(8204);function l(e,t){1&e&&(a.TgZ(0,"div",26),a._uU(1," Title is required. "),a.qZA())}function g(e,t){1&e&&(a.TgZ(0,"div",26),a._uU(1," Text is required. "),a.qZA())}function c(e,t){if(1&e&&(a.TgZ(0,"span"),a._UZ(1,"img",27),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("src",e.banner.banner,a.LSH)}}function u(e,t){1&e&&(a.TgZ(0,"div",26),a._uU(1," Banner is required. "),a.qZA())}function d(e,t){1&e&&(a.TgZ(0,"div",26),a._uU(1," Type is required. "),a.qZA())}function Z(e,t){1&e&&(a.TgZ(0,"div",6),a.TgZ(1,"label",7),a._uU(2," Link "),a.qZA(),a.TgZ(3,"div"),a._UZ(4,"input",28),a.qZA(),a.qZA())}const m=function(e){return{"is-invalid":e}};let b=(()=>{class e{constructor(e,t,n,i){this.activeModal=e,this.fb=t,this.bannerService=n,this.changeDetectorRef=i,this.title="Create Banner",this.buttonText="Create",this.formData=new FormData,this.bannerImage=null,this.isFormSubmitted=!1}ngOnInit(){this.createForm(),this.angForm.patchValue(this.banner),this.title=this.banner._id?"Edit Banner":"Create Banner",this.buttonText=this.banner._id?"Update":"Create"}createForm(){this.angForm=this.fb.group({title:["",[r.kI.required]],text:["",[r.kI.required]],banner:["",[r.kI.required]],type:["banner",[r.kI.required]],link:[""]})}changeCategory(){}submitForm(){this.isFormSubmitted=!0,this.angForm.invalid||(Object.keys(this.f).forEach(e=>{"banner"!=e&&this.formData.append(`${e}`,this.f[e].value)}),this.banner._id?this.bannerService.update(this.banner._id,this.formData).subscribe(e=>{this.activeModal.close("form submit")}):this.bannerService.create(this.formData).subscribe(e=>{this.activeModal.close("form submit")}))}get f(){return this.angForm.controls}get form(){return this.angForm.controls}onFileSelected(e,t){var n;const i=e.target;if(!(null===(n=i.files)||void 0===n?void 0:n.length))return;const r=i.files[0];try{this.formData.delete(t)}catch(a){}this.formData.append(`${t}`,r)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.Kz),a.Y36(r.qu),a.Y36(s.QD),a.Y36(a.sBO))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-add-banner"]],inputs:{banner:"banner"},decls:49,vars:18,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-danger","text-white",3,"click"],["method","post","novalidate","",3,"formGroup","submit"],[1,"modal-body"],[1,"row"],[1,"col-md-12","mb-3","form-group"],["for","name",1,"col-form-label","lable-right"],["type","text","name","title","formControlName","title","id","detail",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","name","text","formControlName","text","id","detail",1,"form-control",3,"ngClass"],[2,"width","100%"],[1,"d-flex","flex-row","justify-content-between","bd-highlight","mb-3"],[1,"bd-highlight"],["type","file","name","banner","formControlName","banner","id","image1",1,"form-control",3,"ngClass","change"],[4,"ngIf"],["for","type",1,"col-form-label","lable-right"],["id","type","name","type","formControlName","type",1,"form-control",3,"change"],["value",""],["value","banner"],["value","text"],["value","link"],["class","col-md-12 mb-3 form-group",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback"],["width","50",3,"src"],["type","link","name","link","formControlName","link",1,"form-control"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"h4",1),a._uU(2),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),a.qZA(),a.qZA(),a.TgZ(4,"form",3),a.NdJ("submit",function(){return t.submitForm()}),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"label",7),a._uU(9," Title "),a.qZA(),a.TgZ(10,"div"),a._UZ(11,"input",8),a.YNc(12,l,2,0,"div",9),a.qZA(),a.qZA(),a.TgZ(13,"div",6),a.TgZ(14,"label",7),a._uU(15," Text "),a.qZA(),a.TgZ(16,"div"),a._UZ(17,"input",10),a.YNc(18,g,2,0,"div",9),a.qZA(),a.qZA(),a.TgZ(19,"div",6),a.TgZ(20,"label",7),a._uU(21," Banner "),a.qZA(),a.TgZ(22,"div",11),a.TgZ(23,"div",12),a.TgZ(24,"div",13),a.TgZ(25,"input",14),a.NdJ("change",function(e){return t.onFileSelected(e,"banner")}),a.qZA(),a.qZA(),a.TgZ(26,"div",13),a.YNc(27,c,2,1,"span",15),a.qZA(),a.qZA(),a.YNc(28,u,2,0,"div",9),a.qZA(),a.qZA(),a.TgZ(29,"div",6),a.TgZ(30,"label",16),a._uU(31," Type "),a.qZA(),a.TgZ(32,"div"),a.TgZ(33,"select",17),a.NdJ("change",function(){return t.changeCategory()}),a.TgZ(34,"option",18),a._uU(35,"Select Category"),a.qZA(),a.TgZ(36,"option",19),a._uU(37,"Banner"),a.qZA(),a.TgZ(38,"option",20),a._uU(39,"Text"),a.qZA(),a.TgZ(40,"option",21),a._uU(41,"Link"),a.qZA(),a.qZA(),a.YNc(42,d,2,0,"div",9),a.qZA(),a.qZA(),a.YNc(43,Z,5,0,"div",22),a.qZA(),a.qZA(),a.TgZ(44,"div",23),a.TgZ(45,"button",24),a._uU(46),a.qZA(),a.TgZ(47,"button",25),a.NdJ("click",function(){return t.activeModal.close("Close click")}),a._uU(48,"Close"),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Oqu(t.title),a.xp6(2),a.Q6J("formGroup",t.angForm),a.xp6(7),a.Q6J("ngClass",a.VKq(12,m,t.isFormSubmitted&&t.form.title.errors)),a.xp6(1),a.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.title.errors?null:t.form.title.errors.required)),a.xp6(5),a.Q6J("ngClass",a.VKq(14,m,t.isFormSubmitted&&t.form.text.errors)),a.xp6(1),a.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.text.errors?null:t.form.text.errors.required)),a.xp6(7),a.Q6J("ngClass",a.VKq(16,m,t.isFormSubmitted&&t.form.banner.errors)),a.xp6(2),a.Q6J("ngIf",t.banner._id),a.xp6(1),a.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.banner.errors?null:t.form.banner.errors.required)),a.xp6(14),a.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.type.errors?null:t.form.type.errors.required)),a.xp6(1),a.Q6J("ngIf","link"===t.angForm.value.type),a.xp6(3),a.Oqu(t.buttonText))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,i.mk,i.O5,r.EJ,r.YN,r.Kr],styles:[""]}),e})();var p=n(89),h=n(3423),f=n(2789),q=n(2798);function T(e,t){if(1&e&&a._UZ(0,"img",33),2&e){const e=a.oxw().$implicit;a.Q6J("src",e.banner,a.LSH)}}function A(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"span",26),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td"),a.TgZ(5,"span",26),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"td"),a.TgZ(8,"span",26),a.YNc(9,T,1,1,"img",27),a.qZA(),a.qZA(),a.TgZ(10,"td"),a.TgZ(11,"span",26),a._uU(12),a.qZA(),a.qZA(),a.TgZ(13,"td"),a.TgZ(14,"span",26),a._uU(15),a.qZA(),a.qZA(),a.TgZ(16,"td",28),a.TgZ(17,"button",29),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().open(t)}),a._UZ(18,"span",30),a.qZA(),a.TgZ(19,"button",31),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().delete(t._id?t._id:"")}),a._UZ(20,"span",32),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(3),a.hij(" ",e.title," "),a.xp6(3),a.hij(" ",e.text," "),a.xp6(3),a.Q6J("ngIf",e.banner),a.xp6(3),a.hij(" ",e.type," "),a.xp6(3),a.hij(" ",e.link," "),a.xp6(3),a.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),a.xp6(2),a.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const v=function(e,t,n){return{id:"server",itemsPerPage:e,currentPage:t,totalItems:n}};let x=(()=>{class e{constructor(e,t,n,i,r){this.auth=e,this.modalService=t,this.bannerService=n,this.changeDetectorRef=i,this.helperService=r,this.limit=10,this.total=0,this.page=1,this.banners=[],this.totalPages=0,this.totalPageSize=0,this.query=""}ngOnInit(){this.getPage(1),this.user$=this.auth.currentUserSubject.asObservable()}open(e){const t=this.modalService.open(b);t.componentInstance.banner=e,t.result.then(e=>{"form submit"===e&&this.getPage(1)},e=>{"form submit"===e&&this.getPage(1)})}getPage(e){this.bannerService.getAll(e,this.limit,this.query).subscribe(t=>{console.log(t),this.total=t.total,this.page=e,this.banners=t.data;const n=Math.ceil(t.total/this.limit);this.totalPages=n,this.totalPageSize=10*n,this.changeDetectorRef.detectChanges()})}delete(e){this.helperService.confirmSwal({message:"You won't be able to revert this!",title:"Are you sure?",buttonText:"Yes, delete it!"}).subscribe(t=>{t&&this.bannerService.delete(e).subscribe(e=>{this.getPage(1)})})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p.e8),a.Y36(o.FF),a.Y36(s.QD),a.Y36(a.sBO),a.Y36(s.W_))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-banner"]],decls:45,vars:11,consts:[[1,"page-breadcrumb"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-start"],[1,"d-flex","flex-row"],[1,"p-2"],[1,"form-group"],["type","text","placeholder","search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-toolbar"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bolder","text-muted"],[1,"min-w-150px"],[1,"min-w-100px","text-end"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","justify-content-end","p-2"],[1,"d-flex","justify-content-start",3,"collectionSize","page","pageChange"],[1,"text-dark","fw-bolder","fs-6"],["height","50","style","margin: 5px;",3,"src",4,"ngIf"],[1,"text-end"],[1,"btn","btn-icon","btn-light-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[1,"btn","btn-icon","btn-light-danger","btn-sm",3,"click"],[1,"svg-icon","svg-danger","svg-icon-3",3,"inlineSVG"],["height","50",2,"margin","5px",3,"src"]],template:function(e,t){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.TgZ(2,"div"),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"input",6),a.NdJ("ngModelChange",function(e){return t.query=e})("keyup",function(){return t.getPage(1)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div"),a.TgZ(9,"ol",7),a.TgZ(10,"li",8),a.TgZ(11,"a",9),a._uU(12,"Dashboard"),a.qZA(),a.qZA(),a.TgZ(13,"li",10),a._uU(14,"Banner"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",11),a.TgZ(16,"div",12),a.TgZ(17,"h3",13),a.TgZ(18,"span",14),a._uU(19,"Banner"),a.qZA(),a.qZA(),a.TgZ(20,"div",15),a.TgZ(21,"button",16),a.NdJ("click",function(){return t.open({title:"",text:"",banner:"",type:"banner",link:""})}),a._uU(22,"Crate Banner"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",17),a.TgZ(24,"div",18),a.TgZ(25,"table",19),a.TgZ(26,"thead"),a.TgZ(27,"tr",20),a.TgZ(28,"th",21),a._uU(29,"Title"),a.qZA(),a.TgZ(30,"th",21),a._uU(31,"Text"),a.qZA(),a.TgZ(32,"th",21),a._uU(33,"Banner"),a.qZA(),a.TgZ(34,"th",21),a._uU(35,"Type"),a.qZA(),a.TgZ(36,"th",21),a._uU(37,"Link"),a.qZA(),a.TgZ(38,"th",22),a._uU(39,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"tbody"),a.YNc(41,A,21,7,"tr",23),a.ALo(42,"paginate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div",24),a.TgZ(44,"ngb-pagination",25),a.NdJ("pageChange",function(e){return t.page=e})("pageChange",function(e){return t.getPage(e)}),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Q6J("ngModel",t.query),a.xp6(34),a.Q6J("ngForOf",a.xi3(42,4,t.banners,a.kEZ(7,v,t.limit,t.page,t.total))),a.xp6(3),a.Q6J("collectionSize",t.totalPageSize)("page",t.page))},directives:[r.Fj,r.JJ,r.On,h.yS,i.sg,o.N9,i.O5,f.d$],pipes:[q._s],styles:[""]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,h.Bz.forChild([{path:"",component:x}]),r.u5,r.UX,f.vi,o.jF,q.JX]]}),e})()}}]);