(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[346],{2346:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CategoryModule:()=>y});var r=i(8583),o=i(3679),a=i(7716),n=i(8319),g=i(8204);function s(t,e){1&t&&(a.TgZ(0,"div",16),a._uU(1," Category is required. "),a.qZA())}function c(t,e){if(1&t&&(a.TgZ(0,"option",17),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.s9C("value",t._id),a.xp6(1),a.Oqu(t.category)}}const l=function(t){return{"is-invalid":t}};let u=(()=>{class t{constructor(t,e,i){this.activeModal=t,this.fb=e,this.categoryService=i,this.categories=[],this.title="Create Category",this.buttonText="Create",this.isFormSubmitted=!1,this.createForm()}ngOnInit(){this.angForm.patchValue(this.category),this.title=this.category._id?"Edit Category":"Create Category",this.buttonText=this.category._id?"Update":"Create",this.getParentCategory()}createForm(){this.angForm=this.fb.group({category:["",[o.kI.required]],mainCategory:[""]})}submitForm(){if(this.isFormSubmitted=!0,this.angForm.invalid)return;const t=this.angForm.value;this.category._id?this.categoryService.update(this.category._id,t).subscribe(t=>{this.activeModal.close("form submit")}):this.categoryService.create(t).subscribe(t=>{this.activeModal.close("form submit")})}get form(){return this.angForm.controls}getParentCategory(){this.categoryService.getParentCategory().subscribe(t=>{this.categories=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(n.Kz),a.Y36(o.qu),a.Y36(g.HE))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-create-category"]],inputs:{category:"category"},decls:26,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-danger","text-white",3,"click"],["method","post","novalidate","",3,"formGroup","submit"],[1,"modal-body"],[1,"row"],[1,"col-md-12","mb-3","form-group"],["for","name",1,"col-form-label","lable-right"],["type","text","name","category","formControlName","category","id","category",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["id","","name","mainCategory","formControlName","mainCategory",1,"form-control"],["value",""],["selected","",3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback"],["selected","",3,"value"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h4",1),a._uU(2),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),a.qZA(),a.qZA(),a.TgZ(4,"form",3),a.NdJ("submit",function(){return e.submitForm()}),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"label",7),a._uU(9," Category "),a.qZA(),a.TgZ(10,"div"),a._UZ(11,"input",8),a.YNc(12,s,2,0,"div",9),a.qZA(),a.qZA(),a.TgZ(13,"div",6),a.TgZ(14,"label",7),a._uU(15," Parent Category "),a.qZA(),a.TgZ(16,"div"),a.TgZ(17,"select",10),a.TgZ(18,"option",11),a._uU(19,"Select Category"),a.qZA(),a.YNc(20,c,2,2,"option",12),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",13),a.TgZ(22,"button",14),a._uU(23),a.qZA(),a.TgZ(24,"button",15),a.NdJ("click",function(){return e.activeModal.close("Close click")}),a._uU(25,"Close"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.Oqu(e.title),a.xp6(2),a.Q6J("formGroup",e.angForm),a.xp6(7),a.Q6J("ngClass",a.VKq(6,l,e.isFormSubmitted&&e.form.category.errors)),a.xp6(1),a.Q6J("ngIf",e.isFormSubmitted&&(null==e.form.category.errors?null:e.form.category.errors.required)),a.xp6(8),a.Q6J("ngForOf",e.categories),a.xp6(3),a.Oqu(e.buttonText))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,r.mk,r.O5,o.EJ,o.YN,o.Kr,r.sg],styles:[""]}),t})();var d=i(3423),m=i(2789),Z=i(2798);function p(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"span",26),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td"),a.TgZ(5,"span",26),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"td",27),a.TgZ(8,"button",28),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().open(e)}),a._UZ(9,"span",29),a.qZA(),a.TgZ(10,"button",30),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().delete(e._id?e._id:"")}),a._UZ(11,"span",31),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw();a.xp6(3),a.hij(" ",t.category," "),a.xp6(3),a.hij(" ",i.getCategoryName(t)," "),a.xp6(3),a.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),a.xp6(2),a.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const b=function(t,e,i){return{id:"server",itemsPerPage:t,currentPage:e,totalItems:i}};let h=(()=>{class t{constructor(t,e,i,r){this.modalService=t,this.categoryService=e,this.changeDetectorRef=i,this.helperService=r,this.limit=10,this.total=0,this.page=1,this.categories=[],this.totalPages=0,this.totalPageSize=0,this.query=""}ngOnInit(){this.getPage(1)}open(t){var e;t="string"==typeof t.mainCategory?t:Object.assign(Object.assign({},t),{mainCategory:null===(e=t.mainCategory)||void 0===e?void 0:e._id});const i=this.modalService.open(u);i.componentInstance.category=t,i.result.then(t=>{"form submit"===t&&this.getPage(1)},t=>{"form submit"===t&&this.getPage(1)})}getPage(t){this.categoryService.getAll(t,this.limit,this.query).subscribe(e=>{this.total=e.total,this.page=t,this.categories=e.data;const i=Math.ceil(e.total/this.limit);this.totalPages=i,this.totalPageSize=10*i,this.changeDetectorRef.detectChanges()})}getCategoryName(t){return t.mainCategory&&"string"!=typeof t.mainCategory?t.mainCategory.category:t.mainCategory}delete(t){this.helperService.confirmSwal({message:"You won't be able to revert this!",title:"Are you sure?",buttonText:"Yes, delete it!"}).subscribe(e=>{e&&this.categoryService.delete(t).subscribe(t=>{this.getPage(1)})})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(n.FF),a.Y36(g.HE),a.Y36(a.sBO),a.Y36(g.W_))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-category"]],decls:39,vars:11,consts:[[1,"page-breadcrumb"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-start"],[1,"d-flex","flex-row"],[1,"p-2"],[1,"form-group"],["type","text","placeholder","search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-toolbar"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bolder","text-muted"],[1,"min-w-150px"],[1,"min-w-100px","text-end"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","justify-content-end","p-2"],[1,"d-flex","justify-content-start",3,"collectionSize","page","pageChange"],[1,"text-dark","fw-bolder","fs-6"],[1,"text-end"],[1,"btn","btn-icon","btn-light-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[1,"btn","btn-icon","btn-light-danger","btn-sm",3,"click"],[1,"svg-icon","svg-danger","svg-icon-3",3,"inlineSVG"]],template:function(t,e){1&t&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.TgZ(2,"div"),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"input",6),a.NdJ("ngModelChange",function(t){return e.query=t})("keyup",function(){return e.getPage(1)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div"),a.TgZ(9,"ol",7),a.TgZ(10,"li",8),a.TgZ(11,"a",9),a._uU(12,"Dashboard"),a.qZA(),a.qZA(),a.TgZ(13,"li",10),a._uU(14,"Category"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",11),a.TgZ(16,"div",12),a.TgZ(17,"h3",13),a.TgZ(18,"span",14),a._uU(19,"Category"),a.qZA(),a.qZA(),a.TgZ(20,"div",15),a.TgZ(21,"button",16),a.NdJ("click",function(){return e.open({category:"",mainCategory:""})}),a._uU(22,"Crate Category"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",17),a.TgZ(24,"div",18),a.TgZ(25,"table",19),a.TgZ(26,"thead"),a.TgZ(27,"tr",20),a.TgZ(28,"th",21),a._uU(29,"Category"),a.qZA(),a.TgZ(30,"th",21),a._uU(31,"Main Category"),a.qZA(),a.TgZ(32,"th",22),a._uU(33,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(34,"tbody"),a.YNc(35,p,12,4,"tr",23),a.ALo(36,"paginate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(37,"div",24),a.TgZ(38,"ngb-pagination",25),a.NdJ("pageChange",function(t){return e.page=t})("pageChange",function(t){return e.getPage(t)}),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(7),a.Q6J("ngModel",e.query),a.xp6(28),a.Q6J("ngForOf",a.xi3(36,4,e.categories,a.kEZ(7,b,e.limit,e.page,e.total))),a.xp6(3),a.Q6J("collectionSize",e.totalPageSize)("page",e.page))},directives:[o.Fj,o.JJ,o.On,d.yS,r.sg,n.N9,m.d$],pipes:[Z._s],styles:[""]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.ez,d.Bz.forChild([{path:"",component:h}]),o.u5,o.UX,m.vi,n.jF,Z.JX]]}),t})()}}]);