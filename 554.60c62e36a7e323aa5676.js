(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[554],{8554:(e,t,i)=>{"use strict";i.r(t),i.d(t,{StoreModule:()=>_});var r=i(8583),o=i(3679),n=i(7716),s=i(8319),c=i(8204);function a(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," Name is required. "),n.qZA())}function u(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," Number is required. "),n.qZA())}function d(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," Please enter valid number. "),n.qZA())}function l(e,t){if(1&e&&(n.TgZ(0,"option",26),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e._id),n.xp6(1),n.Oqu(e.name)}}function g(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," County is required. "),n.qZA())}function m(e,t){if(1&e&&(n.TgZ(0,"option",26),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e._id),n.xp6(1),n.Oqu(e.name)}}function Z(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," City is required. "),n.qZA())}function p(e,t){if(1&e&&(n.TgZ(0,"option",26),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e._id),n.xp6(1),n.Oqu(e.pincode)}}function f(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," Zipcode is required. "),n.qZA())}function b(e,t){1&e&&(n.TgZ(0,"div",25),n._uU(1," Address is required. "),n.qZA())}const h=function(e){return{"is-invalid":e}};let q=(()=>{class e{constructor(e,t,i,r,o,n){this.activeModal=e,this.fb=t,this.StoreService=i,this.cityService=r,this.changeDetectorRef=o,this.countyService=n,this.title="Create Store",this.buttonText="Create",this.cities=[],this.counties=[],this.isFormSubmitted=!1,this.pincodes=[],this.createForm()}ngOnInit(){this.angForm.patchValue(this.store),this.title=this.store._id?"Edit Store":"Create Store",this.buttonText=this.store._id?"Update":"Create",this.getCounties()}createForm(){this.angForm=this.fb.group({name:["",[o.kI.required]],number:["",[o.kI.required,o.kI.pattern(/^[0-9]\d*$/)]],address:["",[o.kI.required]],county:["",[o.kI.required]],city:["",[o.kI.required]],pincode:["",[o.kI.required]]})}submitForm(){if(this.isFormSubmitted=!0,this.angForm.invalid)return;const e=this.angForm.value;this.store._id?this.StoreService.update(this.store._id,e).subscribe(e=>{this.activeModal.close("form submit")}):this.StoreService.create(e).subscribe(e=>{this.activeModal.close("form submit")})}get form(){return this.angForm.controls}getCities(){this.cityService.getCountyWiseData(this.angForm.value.county).subscribe(e=>{this.cities=e,this.changeDetectorRef.detectChanges(),this.angForm.value.county&&""!==this.angForm.value.county&&this.cityChanged()})}getCounties(){this.countyService.getAllData().subscribe(e=>{this.counties=e,this.changeDetectorRef.detectChanges(),this.angForm.value.county&&""!==this.angForm.value.county&&this.getCities()})}cityChanged(){const e=this.cities.filter(e=>e._id===this.angForm.value.city);this.pincodes=e.length>0&&e[0].pincodes?e[0].pincodes:[],this.changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(s.Kz),n.Y36(o.qu),n.Y36(c.d6),n.Y36(c.Zp),n.Y36(n.sBO),n.Y36(c.f2))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-create-store"]],inputs:{store:"store"},decls:55,vars:31,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-danger","text-white",3,"click"],["method","post","novalidate","",3,"formGroup","submit"],[1,"modal-body"],[1,"row"],[1,"col-md-6","mb-3","form-group"],["for","name",1,"col-form-label","lable-right"],["type","text","name","name","formControlName","name","id","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","number",1,"col-form-label"],["type","text","name","number","formControlName","number","id","number",1,"form-control",3,"ngClass"],[1,"col-md-6","fv-row","mb-7"],[1,"form-label","fw-bolder","text-dark","fs-6"],["name","county","formControlName","county",1,"form-control","form-control-lg",3,"ngClass","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","city","formControlName","city",1,"form-control","form-control-lg",3,"ngClass","change"],["name","pincode","formControlName","pincode",1,"form-control","form-control-lg",3,"ngClass"],[1,"col-md-12","b-3","form-group"],["for","address",1,"col-form-label"],["type","text","name","address","formControlName","address","id","address",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n._uU(2),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),n.qZA(),n.qZA(),n.TgZ(4,"form",3),n.NdJ("submit",function(){return t.submitForm()}),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"label",7),n._uU(9," Name "),n.qZA(),n.TgZ(10,"div"),n._UZ(11,"input",8),n.YNc(12,a,2,0,"div",9),n.qZA(),n.qZA(),n.TgZ(13,"div",6),n.TgZ(14,"label",10),n._uU(15," Number "),n.qZA(),n.TgZ(16,"div"),n._UZ(17,"input",11),n.YNc(18,u,2,0,"div",9),n.YNc(19,d,2,0,"div",9),n.qZA(),n.qZA(),n.TgZ(20,"div",12),n.TgZ(21,"label",13),n._uU(22,"County"),n.qZA(),n.TgZ(23,"select",14),n.NdJ("change",function(){return t.getCities()}),n.TgZ(24,"option",15),n._uU(25,"--Select County--"),n.qZA(),n.YNc(26,l,2,2,"option",16),n.qZA(),n.YNc(27,g,2,0,"div",9),n.qZA(),n.TgZ(28,"div",12),n.TgZ(29,"label",13),n._uU(30,"City"),n.qZA(),n.TgZ(31,"select",17),n.NdJ("change",function(){return t.cityChanged()}),n.TgZ(32,"option",15),n._uU(33,"--Select City--"),n.qZA(),n.YNc(34,m,2,2,"option",16),n.qZA(),n.YNc(35,Z,2,0,"div",9),n.qZA(),n.TgZ(36,"div",12),n.TgZ(37,"label",13),n._uU(38,"Zipcode"),n.qZA(),n.TgZ(39,"select",18),n.TgZ(40,"option",15),n._uU(41,"--Select Zipcode--"),n.qZA(),n.YNc(42,p,2,2,"option",16),n.qZA(),n.YNc(43,f,2,0,"div",9),n.qZA(),n.TgZ(44,"div",19),n.TgZ(45,"label",20),n._uU(46," Address "),n.qZA(),n.TgZ(47,"div"),n._UZ(48,"textarea",21),n.YNc(49,b,2,0,"div",9),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(50,"div",22),n.TgZ(51,"button",23),n._uU(52),n.qZA(),n.TgZ(53,"button",24),n.NdJ("click",function(){return t.activeModal.close("Close click")}),n._uU(54,"Close"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Oqu(t.title),n.xp6(2),n.Q6J("formGroup",t.angForm),n.xp6(7),n.Q6J("ngClass",n.VKq(19,h,t.isFormSubmitted&&t.form.name.errors)),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.name.errors?null:t.form.name.errors.required)),n.xp6(5),n.Q6J("ngClass",n.VKq(21,h,t.isFormSubmitted&&t.form.number.errors)),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.number.errors?null:t.form.number.errors.required)),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.number.errors?null:t.form.number.errors.pattern)),n.xp6(4),n.Q6J("ngClass",n.VKq(23,h,t.isFormSubmitted&&t.form.county.errors)),n.xp6(3),n.Q6J("ngForOf",t.counties),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.county.errors?null:t.form.county.errors.required)),n.xp6(4),n.Q6J("ngClass",n.VKq(25,h,t.isFormSubmitted&&t.form.city.errors)),n.xp6(3),n.Q6J("ngForOf",t.cities),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.city.errors?null:t.form.city.errors.required)),n.xp6(4),n.Q6J("ngClass",n.VKq(27,h,t.isFormSubmitted&&t.form.pincode.errors)),n.xp6(3),n.Q6J("ngForOf",t.pincodes),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.pincode.errors?null:t.form.pincode.errors.required)),n.xp6(5),n.Q6J("ngClass",n.VKq(29,h,t.isFormSubmitted&&t.form.address.errors)),n.xp6(1),n.Q6J("ngIf",t.isFormSubmitted&&(null==t.form.address.errors?null:t.form.address.errors.required)),n.xp6(3),n.Oqu(t.buttonText))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,r.mk,r.O5,o.EJ,o.YN,o.Kr,r.sg],styles:[""]}),e})();var v=i(3423),A=i(2789),y=i(2798);function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n.TgZ(2,"span",28),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"td"),n.TgZ(5,"span",29),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"td"),n.TgZ(8,"span",29),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"td"),n.TgZ(11,"span",29),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"td"),n.TgZ(14,"span",29),n._uU(15),n.qZA(),n.qZA(),n.TgZ(16,"td",28),n._uU(17),n.qZA(),n.TgZ(18,"td",30),n.TgZ(19,"button",31),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().open(t)}),n._UZ(20,"span",32),n.qZA(),n.TgZ(21,"button",33),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().delete(t._id?t._id:"")}),n._UZ(22,"span",34),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=n.oxw();n.xp6(3),n.hij(" ",e.name," "),n.xp6(3),n.hij(" ",e.number," "),n.xp6(3),n.hij(" ",i.getCounty(e)," "),n.xp6(3),n.hij(" ",i.getCity(e)," "),n.xp6(3),n.hij(" ",e.address," "),n.xp6(2),n.Oqu(i.getPincode(e)),n.xp6(3),n.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),n.xp6(2),n.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const x=function(e,t,i){return{id:"server",itemsPerPage:e,currentPage:t,totalItems:i}};let C=(()=>{class e{constructor(e,t,i,r){this.modalService=e,this.storeService=t,this.changeDetectorRef=i,this.helperService=r,this.limit=10,this.total=0,this.page=1,this.stores=[],this.totalPages=0,this.totalPageSize=0,this.query=""}ngOnInit(){this.getPage(1)}open(e){console.log("store",e);const t=Object.assign(Object.assign({},e),{city:"string"==typeof e.city?e.city:e.city._id,county:"string"==typeof e.county?e.county:e.county._id,pincode:"string"==typeof e.pincode?e.pincode:e.pincode._id}),i=this.modalService.open(q,{size:"xl"});i.componentInstance.store=t,i.result.then(e=>{"form submit"===e&&this.getPage(1)},e=>{"form submit"===e&&this.getPage(1)})}getCity(e){return e.city?"string"==typeof e.city?e.city:e.city.name:""}getCounty(e){return e.county?"string"==typeof e.county?e.county:e.county.name:""}getPincode(e){return e.pincode?"string"==typeof e.pincode?e.pincode:e.pincode.pincode:""}getPage(e){this.storeService.getAll(e,this.limit,this.query).subscribe(t=>{this.total=t.total,this.page=e,this.stores=t.data;const i=Math.ceil(t.total/this.limit);this.totalPages=i,this.totalPageSize=10*i,this.changeDetectorRef.detectChanges()})}delete(e){this.helperService.confirmSwal({message:"You won't be able to revert this!",title:"Are you sure?",buttonText:"Yes, delete it!"}).subscribe(t=>{t&&this.storeService.delete(e).subscribe(e=>{this.getPage(1)})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(s.FF),n.Y36(c.d6),n.Y36(n.sBO),n.Y36(c.W_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-store"]],decls:47,vars:11,consts:[[1,"page-breadcrumb"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-start"],[1,"d-flex","flex-row"],[1,"p-2"],[1,"form-group"],["type","text","placeholder","search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-toolbar"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bolder","text-muted"],[1,"min-w-150px"],[1,"min-w-140px"],[1,"min-w-120px"],[1,"min-w-100px","text-end"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","justify-content-end","p-2"],[1,"d-flex","justify-content-start",3,"collectionSize","page","pageChange"],[1,"text-dark","fw-bolder","fs-6"],[1,"text-dark","fw-bolder","d-block","mb-1","fs-6"],[1,"text-end"],[1,"btn","btn-icon","btn-light-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[1,"btn","btn-icon","btn-light-danger","btn-sm",3,"click"],[1,"svg-icon","svg-danger","svg-icon-3",3,"inlineSVG"]],template:function(e,t){1&e&&(n.TgZ(0,"nav",0),n.TgZ(1,"div",1),n.TgZ(2,"div"),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"input",6),n.NdJ("ngModelChange",function(e){return t.query=e})("keyup",function(){return t.getPage(1)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div"),n.TgZ(9,"ol",7),n.TgZ(10,"li",8),n.TgZ(11,"a",9),n._uU(12,"Dashboard"),n.qZA(),n.qZA(),n.TgZ(13,"li",10),n._uU(14,"Store"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",11),n.TgZ(16,"div",12),n.TgZ(17,"h3",13),n.TgZ(18,"span",14),n._uU(19,"Store"),n.qZA(),n.qZA(),n.TgZ(20,"div",15),n.TgZ(21,"button",16),n.NdJ("click",function(){return t.open({name:"",number:"",address:"",city:"",pincode:"",county:""})}),n._uU(22,"Crate Store"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",17),n.TgZ(24,"div",18),n.TgZ(25,"table",19),n.TgZ(26,"thead"),n.TgZ(27,"tr",20),n.TgZ(28,"th",21),n._uU(29,"Store Name"),n.qZA(),n.TgZ(30,"th",22),n._uU(31,"Store Number"),n.qZA(),n.TgZ(32,"th",23),n._uU(33,"County"),n.qZA(),n.TgZ(34,"th",23),n._uU(35,"City"),n.qZA(),n.TgZ(36,"th",23),n._uU(37,"Address"),n.qZA(),n.TgZ(38,"th",23),n._uU(39,"Zipcode"),n.qZA(),n.TgZ(40,"th",24),n._uU(41,"Actions"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"tbody"),n.YNc(43,T,23,8,"tr",25),n.ALo(44,"paginate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(45,"div",26),n.TgZ(46,"ngb-pagination",27),n.NdJ("pageChange",function(e){return t.page=e})("pageChange",function(e){return t.getPage(e)}),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngModel",t.query),n.xp6(36),n.Q6J("ngForOf",n.xi3(44,4,t.stores,n.kEZ(7,x,t.limit,t.page,t.total))),n.xp6(3),n.Q6J("collectionSize",t.totalPageSize)("page",t.page))},directives:[o.Fj,o.JJ,o.On,v.yS,r.sg,s.N9,A.d$],pipes:[y._s],styles:[""]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.ez,v.Bz.forChild([{path:"",component:C}]),o.u5,o.UX,A.vi,s.jF,y.JX]]}),e})()}}]);